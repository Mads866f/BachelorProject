@using DTO.Models
@using Front.Services.ApiService.Elections
@using Front.Services.Interface.Elections
@rendermode InteractiveServer

<MudStack>
    @if (Election is null)
    {
        <MudPaper>
            <MudText Typo="Typo.h4"> Select an election</MudText>
        </MudPaper>
    }
    else
    {
    @foreach (var project in projects)
    {
        <MudPaper>
            <MudGrid>
                <MudItem xs="1">
                    <MudStack>
                        <MudPaper>
                            <MudText Typo="Typo.h5">votes</MudText>
                        </MudPaper>
                        <MudPaper>
                            <MudText Typo="Typo.body1">XXX</MudText>
                        </MudPaper>
                    </MudStack>
                </MudItem>
                <MudItem xs="4">
                    <MudStack>
                        <MudPaper>
                            <MudText Typo="Typo.h5">Project Name</MudText>
                        </MudPaper>
                        <MudPaper>
                            <MudText Typo="Typo.body1">@project.Name</MudText>
                        </MudPaper>
                    </MudStack>
                </MudItem>
                <MudItem xs="4">
                    <MudStack>
                        <MudPaper>
                            <MudText Typo="Typo.h5">Cost</MudText>
                        </MudPaper>
                        <MudPaper>
                            <MudText Typo="Typo.body1">@project.Cost</MudText>
                        </MudPaper>
                    </MudStack>
                </MudItem>
            </MudGrid>
        </MudPaper>
    }
    }
</MudStack>

@code
{
    [CascadingParameter]
    public Election Election { get; set; }
    
    [Inject] private IProjectsApiService projectsApiService {get; set;}

    private List<Project> projects = [];


    protected override async Task OnInitializedAsync()
    {
        projects = await projectsApiService.GetProjectsWithElectionId(Election.Id.ToString());
    }
}
